{
  "name": "roll20_script",
  "rules": {
    "roll20_script": {
      "type": "REPEAT",
      "content": {
        "type": "CHOICE",
        "members": [
          {
            "type": "SYMBOL",
            "name": "inlineRoll"
          },
          {
            "type": "SYMBOL",
            "name": "attribute"
          },
          {
            "type": "SYMBOL",
            "name": "ability"
          },
          {
            "type": "SYMBOL",
            "name": "macro"
          },
          {
            "type": "SEQ",
            "members": [
              {
                "type": "ALIAS",
                "content": {
                  "type": "STRING",
                  "value": "#"
                },
                "named": true,
                "value": "string"
              },
              {
                "type": "SYMBOL",
                "name": "_EOF"
              }
            ]
          },
          {
            "type": "ALIAS",
            "content": {
              "type": "PREC_RIGHT",
              "value": 0,
              "content": {
                "type": "REPEAT1",
                "content": {
                  "type": "PATTERN",
                  "value": ".|\\n|#\\s"
                }
              }
            },
            "named": true,
            "value": "string"
          }
        ]
      }
    },
    "inlineRoll": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "[["
            },
            {
              "type": "SYMBOL",
              "name": "formula"
            },
            {
              "type": "STRING",
              "value": "]]"
            }
          ]
        },
        {
          "type": "ALIAS",
          "content": {
            "type": "PATTERN",
            "value": "\\[\\[[\\s\\n]*\\]\\]"
          },
          "named": true,
          "value": "invalid_inlineRoll"
        }
      ]
    },
    "parenthetical": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "("
        },
        {
          "type": "SYMBOL",
          "name": "formula"
        },
        {
          "type": "STRING",
          "value": ")"
        }
      ]
    },
    "operator": {
      "type": "PATTERN",
      "value": "[*\\/+-]|\\+\\s*-|-\\s*\\+"
    },
    "formula": {
      "type": "SEQ",
      "members": [
        {
          "type": "SYMBOL",
          "name": "_element_first"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "CHOICE",
            "members": [
              {
                "type": "SEQ",
                "members": [
                  {
                    "type": "SYMBOL",
                    "name": "operator"
                  },
                  {
                    "type": "SYMBOL",
                    "name": "_element"
                  }
                ]
              },
              {
                "type": "SEQ",
                "members": [
                  {
                    "type": "ALIAS",
                    "content": {
                      "type": "SYMBOL",
                      "name": "operator"
                    },
                    "named": true,
                    "value": "invalid_formula1"
                  },
                  {
                    "type": "STRING",
                    "value": ""
                  }
                ]
              }
            ]
          }
        },
        {
          "type": "ALIAS",
          "content": {
            "type": "REPEAT",
            "content": {
              "type": "PATTERN",
              "value": "[^\\]]|\\][^\\]]|\\n"
            }
          },
          "named": true,
          "value": "invalid_formula2"
        }
      ]
    },
    "_element_first": {
      "type": "SEQ",
      "members": [
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "_wsp"
            },
            {
              "type": "BLANK"
            }
          ]
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "SYMBOL",
                  "name": "label"
                },
                {
                  "type": "CHOICE",
                  "members": [
                    {
                      "type": "SYMBOL",
                      "name": "_labels"
                    },
                    {
                      "type": "BLANK"
                    }
                  ]
                },
                {
                  "type": "CHOICE",
                  "members": [
                    {
                      "type": "SYMBOL",
                      "name": "_placeholders"
                    },
                    {
                      "type": "SEQ",
                      "members": [
                        {
                          "type": "CHOICE",
                          "members": [
                            {
                              "type": "SYMBOL",
                              "name": "_placeholders"
                            },
                            {
                              "type": "BLANK"
                            }
                          ]
                        },
                        {
                          "type": "CHOICE",
                          "members": [
                            {
                              "type": "SYMBOL",
                              "name": "diceRoll"
                            },
                            {
                              "type": "SYMBOL",
                              "name": "tableRoll"
                            }
                          ]
                        },
                        {
                          "type": "CHOICE",
                          "members": [
                            {
                              "type": "SYMBOL",
                              "name": "_placeholders"
                            },
                            {
                              "type": "BLANK"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "CHOICE",
              "members": [
                {
                  "type": "SYMBOL",
                  "name": "_placeholders"
                },
                {
                  "type": "SEQ",
                  "members": [
                    {
                      "type": "CHOICE",
                      "members": [
                        {
                          "type": "SYMBOL",
                          "name": "_placeholders"
                        },
                        {
                          "type": "BLANK"
                        }
                      ]
                    },
                    {
                      "type": "CHOICE",
                      "members": [
                        {
                          "type": "SYMBOL",
                          "name": "inlineRoll"
                        },
                        {
                          "type": "SYMBOL",
                          "name": "parenthetical"
                        },
                        {
                          "type": "SYMBOL",
                          "name": "diceRoll"
                        },
                        {
                          "type": "SYMBOL",
                          "name": "tableRoll"
                        },
                        {
                          "type": "SYMBOL",
                          "name": "groupRoll"
                        },
                        {
                          "type": "SEQ",
                          "members": [
                            {
                              "type": "ALIAS",
                              "content": {
                                "type": "SYMBOL",
                                "name": "_number_signed_decimal"
                              },
                              "named": true,
                              "value": "number"
                            },
                            {
                              "type": "STRING",
                              "value": ""
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "CHOICE",
                      "members": [
                        {
                          "type": "SYMBOL",
                          "name": "_placeholders"
                        },
                        {
                          "type": "BLANK"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "_macro"
            },
            {
              "type": "BLANK"
            }
          ]
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "_labels"
            },
            {
              "type": "BLANK"
            }
          ]
        }
      ]
    },
    "_element": {
      "type": "PREC",
      "value": 1,
      "content": {
        "type": "SEQ",
        "members": [
          {
            "type": "CHOICE",
            "members": [
              {
                "type": "SYMBOL",
                "name": "_labels"
              },
              {
                "type": "BLANK"
              }
            ]
          },
          {
            "type": "CHOICE",
            "members": [
              {
                "type": "SYMBOL",
                "name": "_placeholders"
              },
              {
                "type": "SEQ",
                "members": [
                  {
                    "type": "CHOICE",
                    "members": [
                      {
                        "type": "SYMBOL",
                        "name": "_placeholders"
                      },
                      {
                        "type": "BLANK"
                      }
                    ]
                  },
                  {
                    "type": "CHOICE",
                    "members": [
                      {
                        "type": "SYMBOL",
                        "name": "inlineRoll"
                      },
                      {
                        "type": "SYMBOL",
                        "name": "parenthetical"
                      },
                      {
                        "type": "SYMBOL",
                        "name": "diceRoll"
                      },
                      {
                        "type": "SYMBOL",
                        "name": "tableRoll"
                      },
                      {
                        "type": "SYMBOL",
                        "name": "groupRoll"
                      },
                      {
                        "type": "ALIAS",
                        "content": {
                          "type": "SYMBOL",
                          "name": "_number_unsigned_decimal"
                        },
                        "named": true,
                        "value": "number"
                      }
                    ]
                  },
                  {
                    "type": "CHOICE",
                    "members": [
                      {
                        "type": "SYMBOL",
                        "name": "_placeholders"
                      },
                      {
                        "type": "BLANK"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "type": "CHOICE",
            "members": [
              {
                "type": "SYMBOL",
                "name": "_macro"
              },
              {
                "type": "BLANK"
              }
            ]
          },
          {
            "type": "CHOICE",
            "members": [
              {
                "type": "SYMBOL",
                "name": "_labels"
              },
              {
                "type": "BLANK"
              }
            ]
          }
        ]
      }
    },
    "_placeholders": {
      "type": "PREC_RIGHT",
      "value": 0,
      "content": {
        "type": "REPEAT1",
        "content": {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "attribute"
            },
            {
              "type": "SYMBOL",
              "name": "ability"
            }
          ]
        }
      }
    },
    "_labels": {
      "type": "REPEAT1",
      "content": {
        "type": "CHOICE",
        "members": [
          {
            "type": "SYMBOL",
            "name": "label"
          },
          {
            "type": "SYMBOL",
            "name": "_wsp"
          }
        ]
      }
    },
    "label": {
      "type": "SEQ",
      "members": [
        {
          "type": "SYMBOL",
          "name": "_leftBracket"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "CHOICE",
            "members": [
              {
                "type": "PATTERN",
                "value": "[^\\]&@%#\\n]+"
              },
              {
                "type": "SYMBOL",
                "name": "attribute"
              },
              {
                "type": "SYMBOL",
                "name": "ability"
              },
              {
                "type": "SYMBOL",
                "name": "_macro"
              },
              {
                "type": "SYMBOL",
                "name": "_ampersand"
              },
              {
                "type": "SYMBOL",
                "name": "_at"
              },
              {
                "type": "SYMBOL",
                "name": "_percent"
              },
              {
                "type": "SYMBOL",
                "name": "_hash"
              },
              {
                "type": "SYMBOL",
                "name": "_escapedCharacter"
              }
            ]
          }
        },
        {
          "type": "SYMBOL",
          "name": "_rightBracket"
        }
      ]
    },
    "attribute": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "@{"
            },
            {
              "type": "SYMBOL",
              "name": "attributeName"
            },
            {
              "type": "STRING",
              "value": "}"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "@{"
            },
            {
              "type": "CHOICE",
              "members": [
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "STRING",
                    "value": "selected"
                  },
                  "named": true,
                  "value": "token"
                },
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "STRING",
                    "value": "target"
                  },
                  "named": true,
                  "value": "token"
                },
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "SYMBOL",
                    "name": "attributeName"
                  },
                  "named": true,
                  "value": "characterName"
                }
              ]
            },
            {
              "type": "STRING",
              "value": "|"
            },
            {
              "type": "SYMBOL",
              "name": "attributeName"
            },
            {
              "type": "CHOICE",
              "members": [
                {
                  "type": "STRING",
                  "value": "}"
                },
                {
                  "type": "SEQ",
                  "members": [
                    {
                      "type": "STRING",
                      "value": "|"
                    },
                    {
                      "type": "ALIAS",
                      "content": {
                        "type": "STRING",
                        "value": "max"
                      },
                      "named": true,
                      "value": "keyword"
                    },
                    {
                      "type": "STRING",
                      "value": "}"
                    }
                  ]
                },
                {
                  "type": "SEQ",
                  "members": [
                    {
                      "type": "STRING",
                      "value": "|"
                    },
                    {
                      "type": "ALIAS",
                      "content": {
                        "type": "PATTERN",
                        "value": "[^}]*"
                      },
                      "named": true,
                      "value": "invalid_attribute1"
                    },
                    {
                      "type": "STRING",
                      "value": "}"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "ALIAS",
          "content": {
            "type": "TOKEN",
            "content": {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "@{"
                },
                {
                  "type": "PATTERN",
                  "value": "(\\|[^}]*|[^}]+\\|)?"
                },
                {
                  "type": "STRING",
                  "value": "}"
                }
              ]
            }
          },
          "named": true,
          "value": "invalid_attribute2"
        }
      ]
    },
    "attributeName": {
      "type": "PATTERN",
      "value": "[^|}\\n]+"
    },
    "ability": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "%{"
            },
            {
              "type": "CHOICE",
              "members": [
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "PATTERN",
                    "value": "selected"
                  },
                  "named": true,
                  "value": "token"
                },
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "PATTERN",
                    "value": "target"
                  },
                  "named": true,
                  "value": "token"
                },
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "TOKEN",
                    "content": {
                      "type": "CHOICE",
                      "members": [
                        {
                          "type": "STRING",
                          "value": "@"
                        },
                        {
                          "type": "SEQ",
                          "members": [
                            {
                              "type": "REPEAT1",
                              "content": {
                                "type": "PATTERN",
                                "value": "@+[^|}@{]|[^|}@]+"
                              }
                            },
                            {
                              "type": "CHOICE",
                              "members": [
                                {
                                  "type": "STRING",
                                  "value": "@"
                                },
                                {
                                  "type": "BLANK"
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  },
                  "named": true,
                  "value": "characterName"
                }
              ]
            },
            {
              "type": "STRING",
              "value": "|"
            },
            {
              "type": "SYMBOL",
              "name": "abilityName"
            },
            {
              "type": "STRING",
              "value": "}"
            }
          ]
        },
        {
          "type": "ALIAS",
          "content": {
            "type": "TOKEN",
            "content": {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "%{"
                },
                {
                  "type": "PATTERN",
                  "value": "[^|}]*|\\|[^|}]*|[^|}]+\\||[^|}]*\\|[^|}]*\\|[^}]*"
                },
                {
                  "type": "STRING",
                  "value": "}"
                }
              ]
            }
          },
          "named": true,
          "value": "invalid_ability"
        }
      ]
    },
    "abilityName": {
      "type": "PATTERN",
      "value": "[^|}\\n]+"
    },
    "_macro": {
      "type": "SEQ",
      "members": [
        {
          "type": "SYMBOL",
          "name": "macro"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "_wsp"
            },
            {
              "type": "SYMBOL",
              "name": "_EOF"
            }
          ]
        }
      ]
    },
    "macro": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "#"
            },
            {
              "type": "SYMBOL",
              "name": "macroName"
            }
          ]
        }
      ]
    },
    "macroName": {
      "type": "PREC_RIGHT",
      "value": 0,
      "content": {
        "type": "REPEAT1",
        "content": {
          "type": "CHOICE",
          "members": [
            {
              "type": "PATTERN",
              "value": "@|[^@\\s\\n]+"
            },
            {
              "type": "SYMBOL",
              "name": "attribute"
            }
          ]
        }
      }
    },
    "diceRoll": {
      "type": "PREC_RIGHT",
      "value": 0,
      "content": {
        "type": "SEQ",
        "members": [
          {
            "type": "CHOICE",
            "members": [
              {
                "type": "ALIAS",
                "content": {
                  "type": "SYMBOL",
                  "name": "_number_unsigned_integer"
                },
                "named": true,
                "value": "count"
              },
              {
                "type": "BLANK"
              }
            ]
          },
          {
            "type": "PATTERN",
            "value": "d"
          },
          {
            "type": "ALIAS",
            "content": {
              "type": "CHOICE",
              "members": [
                {
                  "type": "PATTERN",
                  "value": "\\d+|f"
                },
                {
                  "type": "SYMBOL",
                  "name": "attribute"
                },
                {
                  "type": "SYMBOL",
                  "name": "ability"
                }
              ]
            },
            "named": true,
            "value": "sides"
          },
          {
            "type": "REPEAT",
            "content": {
              "type": "CHOICE",
              "members": [
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "PATTERN",
                    "value": "r[<=>]?\\d+"
                  },
                  "named": true,
                  "value": "reroll"
                },
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "PATTERN",
                    "value": "ro[<=>]?\\d+"
                  },
                  "named": true,
                  "value": "reroll_once"
                },
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "PATTERN",
                    "value": "!([<=>]?\\d+)?"
                  },
                  "named": true,
                  "value": "exploding"
                },
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "PATTERN",
                    "value": "!!([<=>]?\\d+)?"
                  },
                  "named": true,
                  "value": "compounding"
                },
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "PATTERN",
                    "value": "!p([<=>]?\\d+)?"
                  },
                  "named": true,
                  "value": "penetrating"
                },
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "PATTERN",
                    "value": "k[hl]?\\d+"
                  },
                  "named": true,
                  "value": "keep"
                },
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "PATTERN",
                    "value": "d[hl]?\\d+"
                  },
                  "named": true,
                  "value": "drop"
                },
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "PATTERN",
                    "value": "[<=>]\\d+"
                  },
                  "named": true,
                  "value": "successes"
                },
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "PATTERN",
                    "value": "[<=>]\\d+f[<=>]?\\d+"
                  },
                  "named": true,
                  "value": "successesMinusFailures"
                },
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "PATTERN",
                    "value": "cs[<=>]?\\d+"
                  },
                  "named": true,
                  "value": "criticalSuccess"
                },
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "PATTERN",
                    "value": "cf[<=>]?\\d+"
                  },
                  "named": true,
                  "value": "criticalFailure"
                },
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "PATTERN",
                    "value": "m\\d*([<=>]\\d+)?"
                  },
                  "named": true,
                  "value": "showMatches"
                },
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "PATTERN",
                    "value": "mt\\d*([<=>]\\d+)?"
                  },
                  "named": true,
                  "value": "countMatches"
                },
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "PATTERN",
                    "value": "s[ad]"
                  },
                  "named": true,
                  "value": "sort"
                },
                {
                  "type": "ALIAS",
                  "content": {
                    "type": "PATTERN",
                    "value": "[acdfhklmoprst<=>\\d!]"
                  },
                  "named": true,
                  "value": "char"
                }
              ]
            }
          }
        ]
      }
    },
    "diceRoll_modifiers": {
      "type": "REPEAT1",
      "content": {
        "type": "CHOICE",
        "members": [
          {
            "type": "ALIAS",
            "content": {
              "type": "PATTERN",
              "value": "r[<=>]?\\d+"
            },
            "named": true,
            "value": "reroll"
          },
          {
            "type": "ALIAS",
            "content": {
              "type": "PATTERN",
              "value": "ro[<=>]?\\d+"
            },
            "named": true,
            "value": "reroll_once"
          },
          {
            "type": "ALIAS",
            "content": {
              "type": "PATTERN",
              "value": "!([<=>]?\\d+)?"
            },
            "named": true,
            "value": "exploding"
          },
          {
            "type": "ALIAS",
            "content": {
              "type": "PATTERN",
              "value": "!!([<=>]?\\d+)?"
            },
            "named": true,
            "value": "compounding"
          },
          {
            "type": "ALIAS",
            "content": {
              "type": "PATTERN",
              "value": "!p([<=>]?\\d+)?"
            },
            "named": true,
            "value": "penetrating"
          },
          {
            "type": "ALIAS",
            "content": {
              "type": "PATTERN",
              "value": "k[hl]?\\d+"
            },
            "named": true,
            "value": "keep"
          },
          {
            "type": "ALIAS",
            "content": {
              "type": "PATTERN",
              "value": "d[hl]?\\d+"
            },
            "named": true,
            "value": "drop"
          },
          {
            "type": "ALIAS",
            "content": {
              "type": "PATTERN",
              "value": "[<=>]\\d+"
            },
            "named": true,
            "value": "successes"
          },
          {
            "type": "ALIAS",
            "content": {
              "type": "PATTERN",
              "value": "[<=>]\\d+f[<=>]?\\d+"
            },
            "named": true,
            "value": "successesMinusFailures"
          },
          {
            "type": "ALIAS",
            "content": {
              "type": "PATTERN",
              "value": "cs[<=>]?\\d+"
            },
            "named": true,
            "value": "criticalSuccess"
          },
          {
            "type": "ALIAS",
            "content": {
              "type": "PATTERN",
              "value": "cf[<=>]?\\d+"
            },
            "named": true,
            "value": "criticalFailure"
          },
          {
            "type": "ALIAS",
            "content": {
              "type": "PATTERN",
              "value": "m\\d*([<=>]\\d+)?"
            },
            "named": true,
            "value": "showMatches"
          },
          {
            "type": "ALIAS",
            "content": {
              "type": "PATTERN",
              "value": "mt\\d*([<=>]\\d+)?"
            },
            "named": true,
            "value": "countMatches"
          },
          {
            "type": "ALIAS",
            "content": {
              "type": "PATTERN",
              "value": "s[ad]"
            },
            "named": true,
            "value": "sort"
          }
        ]
      }
    },
    "diceRoll_modifiers_alt": {
      "type": "REPEAT1",
      "content": {
        "type": "CHOICE",
        "members": [
          {
            "type": "PATTERN",
            "value": "[acdfhklmoprst<=>\\d!]+"
          },
          {
            "type": "SYMBOL",
            "name": "_placeholders"
          }
        ]
      }
    },
    "tableRoll": {
      "type": "SEQ",
      "members": [
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "ALIAS",
              "content": {
                "type": "SYMBOL",
                "name": "_number_unsigned_integer"
              },
              "named": true,
              "value": "count"
            },
            {
              "type": "BLANK"
            }
          ]
        },
        {
          "type": "PATTERN",
          "value": "t"
        },
        {
          "type": "SYMBOL",
          "name": "_leftBracket"
        },
        {
          "type": "ALIAS",
          "content": {
            "type": "REPEAT1",
            "content": {
              "type": "CHOICE",
              "members": [
                {
                  "type": "PATTERN",
                  "value": "[^|}&@%#\\n]+"
                },
                {
                  "type": "SYMBOL",
                  "name": "attribute"
                },
                {
                  "type": "SYMBOL",
                  "name": "ability"
                },
                {
                  "type": "SYMBOL",
                  "name": "_macro"
                },
                {
                  "type": "SYMBOL",
                  "name": "_escapedCharacter"
                },
                {
                  "type": "SYMBOL",
                  "name": "_ampersand"
                },
                {
                  "type": "SYMBOL",
                  "name": "_at"
                },
                {
                  "type": "SYMBOL",
                  "name": "_percent"
                },
                {
                  "type": "SYMBOL",
                  "name": "_hash"
                }
              ]
            }
          },
          "named": true,
          "value": "tableName"
        },
        {
          "type": "SYMBOL",
          "name": "_rightBracket"
        }
      ]
    },
    "groupRoll": {
      "type": "SEQ",
      "members": [
        {
          "type": "SYMBOL",
          "name": "_leftBrace"
        },
        {
          "type": "SYMBOL",
          "name": "formula"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "_comma"
              },
              {
                "type": "SYMBOL",
                "name": "formula"
              }
            ]
          }
        },
        {
          "type": "SYMBOL",
          "name": "_rightBrace"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "ALIAS",
              "content": {
                "type": "SYMBOL",
                "name": "_groupRoll_modifiers"
              },
              "named": true,
              "value": "modifiers"
            },
            {
              "type": "BLANK"
            }
          ]
        }
      ]
    },
    "_groupRoll_modifiers": {
      "type": "REPEAT1",
      "content": {
        "type": "CHOICE",
        "members": [
          {
            "type": "ALIAS",
            "content": {
              "type": "PATTERN",
              "value": "k[hl]?\\d+"
            },
            "named": true,
            "value": "keep"
          },
          {
            "type": "ALIAS",
            "content": {
              "type": "PATTERN",
              "value": "d[hl]?\\d+"
            },
            "named": true,
            "value": "drop"
          },
          {
            "type": "ALIAS",
            "content": {
              "type": "PATTERN",
              "value": "[<=>]\\d+"
            },
            "named": true,
            "value": "successes"
          },
          {
            "type": "ALIAS",
            "content": {
              "type": "PATTERN",
              "value": "[<=>]\\d+f[<=>]?\\d+"
            },
            "named": true,
            "value": "successesMinusFailures"
          }
        ]
      }
    },
    "_number_unsigned_integer": {
      "type": "PATTERN",
      "value": "\\d+"
    },
    "_number_unsigned_decimal": {
      "type": "PREC",
      "value": 1,
      "content": {
        "type": "CHOICE",
        "members": [
          {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "_number_unsigned_integer"
              },
              {
                "type": "CHOICE",
                "members": [
                  {
                    "type": "SEQ",
                    "members": [
                      {
                        "type": "STRING",
                        "value": "."
                      },
                      {
                        "type": "SYMBOL",
                        "name": "_number_unsigned_integer"
                      }
                    ]
                  },
                  {
                    "type": "BLANK"
                  }
                ]
              }
            ]
          },
          {
            "type": "SEQ",
            "members": [
              {
                "type": "STRING",
                "value": "."
              },
              {
                "type": "SYMBOL",
                "name": "_number_unsigned_integer"
              }
            ]
          }
        ]
      }
    },
    "_number_signed_decimal": {
      "type": "SEQ",
      "members": [
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "PATTERN",
              "value": "[+-]"
            },
            {
              "type": "BLANK"
            }
          ]
        },
        {
          "type": "SYMBOL",
          "name": "_number_unsigned_integer"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "."
                },
                {
                  "type": "SYMBOL",
                  "name": "_number_unsigned_integer"
                }
              ]
            },
            {
              "type": "BLANK"
            }
          ]
        }
      ]
    },
    "_wsp": {
      "type": "PATTERN",
      "value": "[\\s\\n]+"
    },
    "_questionMark": {
      "type": "PATTERN",
      "value": "\\?"
    },
    "_leftBrace": {
      "type": "PATTERN",
      "value": "\\{"
    },
    "_equals": {
      "type": "PATTERN",
      "value": "="
    },
    "_leftBracket": {
      "type": "PATTERN",
      "value": "\\["
    },
    "_rightBracket": {
      "type": "PATTERN",
      "value": "\\]"
    },
    "_plus": {
      "type": "PATTERN",
      "value": "\\+"
    },
    "_minus": {
      "type": "PATTERN",
      "value": "\\-"
    },
    "_digit": {
      "type": "PATTERN",
      "value": "\\d"
    },
    "_leftParen": {
      "type": "PATTERN",
      "value": "\\("
    },
    "_rightParen": {
      "type": "PATTERN",
      "value": "\\)"
    },
    "_tilde": {
      "type": "PATTERN",
      "value": "~"
    },
    "_rightBrace": {
      "type": "PATTERN",
      "value": "\\}"
    },
    "_pipe": {
      "type": "PATTERN",
      "value": "\\|"
    },
    "_comma": {
      "type": "PATTERN",
      "value": ","
    },
    "_ampersand": {
      "type": "PATTERN",
      "value": "&"
    },
    "_at": {
      "type": "PATTERN",
      "value": "@"
    },
    "_percent": {
      "type": "PATTERN",
      "value": "%"
    },
    "_hash": {
      "type": "PATTERN",
      "value": "#"
    },
    "_escapedCharacter": {
      "type": "PATTERN",
      "value": "&((undefined);){0}([a-zA-Z\\d]+|#\\d+|#[xX]([a-fA-F\\d]{2}){1,2});"
    }
  },
  "extras": [],
  "conflicts": [],
  "externals": [
    {
      "type": "SYMBOL",
      "name": "_EOF"
    }
  ],
  "inline": [],
  "supertypes": []
}

